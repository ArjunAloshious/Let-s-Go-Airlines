<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <!-- For Bootstrap Cards -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
    <title>Let's Go Airlines - Search Flights</title>

    <link rel="icon" type="image/png" href="favicon.png" sizes="32x32"/>
    <link rel="stylesheet" href="styling.css">

    <script defer src="validation.js"></script>

</head>
<body>
    <!-- For validation -->
    <div style="text-align: center; font-weight: bold; font-size:25px; color:darkslateblue"><p id="error"></p></div>
    
    <a href="http://localhost:3000/home"><img src="logo.jpg" style="left: 13px;margin-top: -100px;position: absolute;top: 15%;" alt="Logo" width="150" height="100"></a>
    <center><p style="font-size:45px;">Let's Go Airlines</p></center>
    
    <div class="topnav">
        <a href="http://localhost:3000/home">Home</a>
        <a href="http://localhost:3000/home#overview">Overview</a>
        <a href="http://localhost:3000/home#vision">Vision</a>
        <a href="http://localhost:3000/home#values">Values</a>
        <a href="http://localhost:3000/fleet">Our Fleet</a>
        <a href="http://localhost:3000/flightschedules">Flight Schedules</a>
        <a href="http://localhost:3000/search" style="float:right">Search Flights</a>
    </div><br><br>

    
    <form name="searchFlights" id="form" action="http://localhost:3000/search" method="post">  
        <center>
            <table cellspacing="30">
                <tr>
                    <td align="right" style="font-size:19px;">Origin City:</td>
                    <td align="right">
                        <select id="origin" name="origin">
                            <option disabled selected value>Select City</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Kolkata">Kolkata</option>
                            <option value="Chennai">Chennai</option>
                            <option value="Bangalore">Bangalore</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td align="right" style="font-size:19px;">Destination City:</td>
                    <td align="right">
                        <select id="destination" name="destination">
                            <option disabled selected value>Select City</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Kolkata">Kolkata</option>
                            <option value="Chennai">Chennai</option>
                            <option value="Bangalore">Bangalore</option>
                         </select>    
                    </td>
                </tr>
                <tr>
                    <td align="right" style="font-size:19px;">Travel Date:</td>
                    <td align="right">
                            <input type="date" id="datepicker" name="datepicker" style="width:144px;">
                    </td>
                </tr>
                <tr>
                    <td align="right" style="font-size:19px;">No. of Passengers:</td>
                    <td align="right">
                        <select id="pCount" name="pCount">
                            <option disabled selected value>Select Number</option>
                            <option value="count1">1</option>
                            <option value="count2">2</option>
                        </select>   
                    </td>
                </tr>
                <tr>
                    <td align="center" colspan="2"><input id="submitButton" type="submit" value="Search Flights" style="font-size:15px ; padding:10px 30px; font-family:'Trebuchet MS';"></td>
                </tr>
            </table>
        </center>
    </form><br><br><br>

    <%  if(data.length == 0) {  %>
    
    <center><h4>No Flights Available for that Day or Route..</h4></center>
    <br><br><br><br><br>
    
    <%   } else { 

    data.forEach( row => {  %>
    
    <form name="selectFlight" action="http://localhost:3000/bookingPage" method="post">
        <div class='container'>
            <div class = "row justify-content-center">
                <div class = "col-sm-7">       
                    <div class="card">
                        <h4 class="card-header bg-black">Flight Number: <%= row.FlightNumber %> </h4>
                        <div class="card-body">
    
                            <div class = "row justify-content-center"> 
                                <div class = "col-sm">   
                                    <h5>Arrival Time : <%= row.Arrival %> </h5>
                                </div>
                                <div class = "col-sm">   
                                    <h5>Departure Time : <%= row.Departure %> </h5>
                                </div>
                            </div><br>
                            <div class = "row justify-content-left"> 
                                <h5 style="padding-left:13px;"> Ticket Price : <%= row.Price %> </h5>
                            </div>

                            <input type="hidden" name="FlightNumber" value="<%= row.FlightNumber %>">

                            <div  class = "row justify-content-center">
                                    <input type="submit" value="Proceed to Book" style="padding:6px; border-radius: 7px; color: white;background-color:rgb(22, 84, 197);">
                            </div>
    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form><br><br>

    <% })} %>

    <div style="position: relative; bottom: 0%; width: 99%;">
    <footer>
        <p>Copyright &copy; 2021 Let's Go Airlines. All rights reserved.<a style="color:white; position: absolute; right:2%;" href="http://localhost:3000/contact">Contact Us</a>
        </p>
    </footer>
    </div>

</body>
</html>